<nz-spin [nzSpinning]="saveLoader" [nzSize]="'large'" class="builder-design">
  <form [formGroup]="multiSelectForm">
    <div formArrayName="multiSelects" class="execute-form drawer-height">
      <div *ngFor="let multiSelect of multiSelectArray.controls; let i = index" class="flex flex-wrap mt-4 border">
        <div [formGroupName]="i" class="w-full h-500">
          <div class="p-2 w-full box-border flex justify-start items-center flex-auto">
            <div class="box !mr-2 w-1/3  box-border">
              <label>Action Id</label>
              <input class="!bg-[#f5f5f5] !cursor-not-allowed w-full rounded-[4px]" nz-input placeholder="Basic usage"
                formControlName="id" readonly type="input" [disabled]="true" />
            </div>
            <div class="box !mr-2 w-1/3  box-border">
              <label>Action Type</label>
              <nz-select class="form-select execute-form-select w-full rounded-[4px]" nzShowSearch nzAllowClear
                aria-label="Default Select Example" formControlName="action">
                <nz-option nzValue="select" nzLabel="Select" selected></nz-option>
                <nz-option nzValue="load" nzLabel="On Load"></nz-option>
                <nz-option nzValue="click" nzLabel="On Click"></nz-option>
                <nz-option nzValue="fileupload" nzLabel="File Upload"></nz-option>
                <nz-option nzValue="change" nzLabel="Change"></nz-option>
                <nz-option nzValue="dblclick" nzLabel="Double Click"></nz-option>
                <nz-option nzValue="mouseover" nzLabel="Mouse Over"></nz-option>
                <nz-option nzValue="mouseleave" nzLabel="Mouse Leave"></nz-option>
                <nz-option nzValue="mouseenter" nzLabel="Mouse Enter"></nz-option>
              </nz-select>
            </div>
            <div class="box !mr-2 w-1/3 box-border">
              <label>Component ID</label>
              <nz-select class="form-select execute-form-select w-full rounded-[4px]" nzShowSearch nzAllowClear
                aria-label="Default Select Example" formControlName="componentFrom">
                <nz-option [nzLabel]="item.title" [nzValue]="item.key" *ngFor="let item of nodeList"></nz-option>
              </nz-select>
            </div>
            <div class="box !mr-2 w-1/3 box-border">
              <label>Target ID</label>
              <nz-select class="form-select execute-form-select w-full rounded-[4px]" nzShowSearch nzAllowClear
                aria-label="Default Select Example" formControlName="targetId">
                <nz-option [nzLabel]="item.title" [nzValue]="item.key" *ngFor="let item of nodeList"></nz-option>
              </nz-select>
            </div>
            <div class="box w-1/3 box-border">
              <label>Level</label>
              <nz-select class="form-select execute-form-select w-full rounded-[4px]" nzShowSearch nzAllowClear
                aria-label="Default Select Example" formControlName="level">
                <nz-option [nzLabel]="item.title" [nzValue]="item.key" *ngFor="let item of levelList"></nz-option>
              </nz-select>
            </div>
          </div>

          <div class="w-full flex justify-end items-center p-2 pt-0">

          </div>

          <div class="!p-2 !pr-0 !w-full !h-fit !flex flex-col !items-center">
            <st-monaco-editor [selectedNode]="selectedNode" [screenName]="screenname" [formlyModel]="this.formlyModel"
              [applicationId]="applicationid" [nodes]="nodes" [screens]="screens" [jsonSchema]="jsonSchema"
              [screeenBuilderId]="screeenBuilderId" [actionRule]="multiSelect.value.monacoEditorControl"
              (contentChange)="onEditorContentChange($event, i)"
              [codeEditorRuleInstance]="multiSelect.value.monacoEditorControl"
              class="!w-full !rounded-md !inline-block"></st-monaco-editor>
            <div class="!w-full !inline-flex justify-end items-center  !p-1.5 ">
              <button nzDanger nz-button nzType="primary"
                class="!h-[30px] !w-[30px] !flex !justify-center !items-center" (click)="removeMultiSelect(i)">
                <i class="fa-regular fa-trash"></i></button>
            </div>

          </div>

        </div>

      </div>
    </div>


    <div class="drawer-height-btn">
      <button nz-button nzType="primary" class="!bg-green-500 hover:!bg-green-400 !border-none "
        (click)="addMultiSelect()"> <i class="fa-regular fa-plus mr-2"></i> Add</button>
      <button nz-button nzType="primary" class="!bg-green-500 hover:!bg-green-400 !border-none !mx-2"
        (click)="addAllActions()"> <i class="fa-regular fa-plus mr-2"></i> Add All</button>
      <button nz-button nzType="primary" class="btn" title="Save" (click)="saveMultiSelects()" ngbTooltip="Save Table">
        <i class="fa-regular fa-floppy-disk mr-2"></i> Save </button>
    </div>

  </form>
</nz-spin>